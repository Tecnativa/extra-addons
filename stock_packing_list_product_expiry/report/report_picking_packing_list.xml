<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template
        id="report_picking_packing_list_document"
        inherit_id="stock_packing_list.report_picking_packing_list_document"
    >
        <!-- Header -->
        <xpath expr="//th[@name='th_sm_code']" position="after">
            <th
                name="th_sm_scientific_name"
                t-if="'scientific_name' in optional_columns"
            ><strong>Scientific name</strong></th>
        </xpath>
        <xpath expr="//th[@name='th_sm_lot']" position="after">
            <th
                name="th_sm_lot_origin_country"
                t-if="'lot_origin_country' in optional_columns"
            ><strong>Origin</strong></th>
            <th
                name="th_sm_packaging_date"
                t-if="'packaging_date' in optional_columns"
            ><strong>Packaging date</strong></th>
            <th
                name="th_sm_expiration_date"
                t-if="'expiration_date' in optional_columns"
            ><strong>Expiration date</strong></th>
        </xpath>
        <!-- Body -->
        <xpath expr="//td[@name='td_product']" position="after">
            <td t-if="'scientific_name' in optional_columns">
                <span t-field="detail.scientific_name_ids.name" />
            </td>
        </xpath>
        <xpath expr="//span[@t-field='detail.lot_id']/.." position="after">
            <td t-if="'lot_origin_country' in optional_columns">
                <span t-field="detail.lot_id.country_id.name" />
            </td>
            <td t-if="'packaging_date' in optional_columns">
                <span t-field="detail.packaging_date" t-options="{'widget': 'date'}" />
            </td>
            <td t-if="'expiration_date' in optional_columns">
                <span t-field="detail.expiration_date" t-options="{'widget': 'date'}" />
            </td>
        </xpath>
        <!-- Footer -->
        <xpath expr="//td[@name='tf_total']" position="after">
            <td t-if="'scientific_name' in optional_columns" />
            <td t-if="'lot_origin_country' in optional_columns" />
            <td t-if="'packaging_date' in optional_columns" />
            <td t-if="'expiration_date' in optional_columns" />
        </xpath>
    </template>
    <template
        id="report_picking_packing_list"
        inherit_id="stock_packing_list.report_picking_packing_list"
    >
        <xpath expr="//t[@t-set='optional_columns']" position="after">
            <t
                t-set="optional_columns"
                t-value="optional_columns + ['scientific_name', 'packaging_date', 'expiration_date']"
            />
        </xpath>
    </template>
</odoo>
